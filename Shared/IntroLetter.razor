<div class="intro-overlay">
  <div class="envelope @(flap ? "open" : "")" @onclick="Open">
    <div class="flap"></div>
    <div class="letter" @onclick:stopPropagation="true">
      <h2>@(Headline ?? "From the Operaâ€™s Desk")</h2>
      <p>@(Body ?? "Your passage to Chicago awaits.")</p>
      @if (PresentationDate != default)
      {
        <div class="friday"><strong>Presentation:</strong> @PresentationDate.ToString("dddd, MMM d")</div>
      }
      <button class="btn" type="button" @onclick="Open">Open Invitation</button>
    </div>
  </div>
</div>

@code {
  [Parameter] public string? Headline { get; set; }
  [Parameter] public string? Body { get; set; }
  [Parameter] public DateTime PresentationDate { get; set; }
  [Parameter] public EventCallback OnOpen { get; set; }

  bool flap = false;

  private async Task Open()
  {
    flap = true;
    StateHasChanged();
    await Task.Delay(450);
    if (OnOpen.HasDelegate) await OnOpen.InvokeAsync();
  }
}
